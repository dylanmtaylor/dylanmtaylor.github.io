---
layout: post
status: publish
published: true
title: Significant LibreScribe Progress Made
author:
  display_name: Dylan Taylor
  login: aliendude5300
  email: dylan.m.taylor92@gmail.com
  url: ''
author_login: aliendude5300
author_email: dylan.m.taylor92@gmail.com
wordpress_id: 1095
wordpress_url: http://dylanmtaylor.com/?p=1095
date: '2011-09-02 22:12:10 +0000'
date_gmt: '2011-09-02 22:12:10 +0000'
---
<p>As you may have noticed, I took a break from working on <a href="https:&#47;&#47;github.com&#47;aliendude5300&#47;LibreScribe">LibreScribe<&#47;a> for a while, and the project looked as though it was abandoned. Well, it isn't, and I've got tons of good news! Since <a href="http:&#47;&#47;dylanmtaylor.com&#47;2011&#47;05&#47;21&#47;librescribe-progress-update&#47;">the last time I wrote an update about LibreScribe<&#47;a>, in late May, I made several incredibly significant changes. Some of these may not seem that exciting, but they are absolutely crucial in order to further develop the program. Some of these new features (such as retrieving and changing the name of the device) didn't exist in libSmartpen <em>at all<&#47;em>, so implementing them required me to capture packets sent over USB and do a bit of <a class="zem_slink" title="Reverse engineering" href="http:&#47;&#47;en.wikipedia.org&#47;wiki&#47;Reverse_engineering" rel="wikipedia">reverse engineering<&#47;a>. At first, I used the trial version of <a href="http:&#47;&#47;www.sysnucleus.com&#47;index.html">USBTrace<&#47;a>, but I quickly realized that it wasn't the tool for the job when I got notifications that I used more than my 256K data limit just by opening <a class="zem_slink" title="Livescribe " href="http:&#47;&#47;www.livescribe.com" rel="homepage">LiveScribe<&#47;a> Desktop. To make it even less appealing, it costs <em>$195 USD<&#47;em> <em>for a single license<&#47;em>! That's ridiculous! So of course, I did a bit of searching, and I found <a href="http:&#47;&#47;code.google.com&#47;p&#47;busdog&#47;">busdog<&#47;a>, which does the same job (although using unsigned filter drivers that require modifying windows settings and rebooting several times) for <em>free<&#47;em>! Although getting it setup was significantly more frustrating than getting USBTrace working, it was well worth not paying $195, and it does everything I need it to, albeit without as nice of an interface. Anyways, here's a list of significant changes I made:</p>
<ul>
<li>LibreScribe no longer crashes when retrieving the list of applications installed on the device. This was incredibly frustrating when I was trying to develop it. It also filters out the LiveScribe Connect and System files, so that they are not listed if they are present on the device.<&#47;li>
<li>Instead of displaying a hard-coded list of notebooks, LibreScribe now retrieves the names of all of the notebooks actually in use on the device.<&#47;li>
<li>When a device is not present on the system, or LibreScribe can't find it, the page tree now shows a "No Smartpen Detected" item, along with an brand new icon that indicates that no device is connected instead of the regular pen icon.<&#47;li>
<li>I added <a class="zem_slink" title="Context menu" href="http:&#47;&#47;en.wikipedia.org&#47;wiki&#47;Context_menu" rel="wikipedia">context menu<&#47;a> <a class="zem_slink" title="Event (computing)" href="http:&#47;&#47;en.wikipedia.org&#47;wiki&#47;Event_%28computing%29" rel="wikipedia">event handlers<&#47;a> to the page tree, so now when you right click or press the menu button, LibreScribe can display a menu of options relevant to the item you clicked. More work on this still needs to be done, but if you click the root element (the smartpen itself, or the placeholder when one isn't connected), you will now see a new menu allowing you to rename the device, refresh the connection, or display information about the device.<&#47;li>
<li>When the device is unplugged or plugged in, the page tree and the applications&#47;audio lists will now automatically refresh themselves.<&#47;li>
<li>LibreScribe now retrieves the name of the smartpen from the device, rather than defaulting to "My LiveScribe Smartpen". It can also set the name of the pen, but this feature is still a little bit buggy (it won't brick your device, so it's safe to test). Interesting discovery: In the LiveScribe desktop software, you can set the name of the pen to anything up to 50 characters. This does not mean that the device doesn't allow more than that, it's just a 'soft' limit in the LiveScribe desktop software. There probably is an <em>actual<&#47;em> limit, but I was able to set the device name to almost a paragraph of text, including every symbol you can type on a standard <a class="zem_slink" title="Keyboard layout" href="http:&#47;&#47;en.wikipedia.org&#47;wiki&#47;Keyboard_layout" rel="wikipedia">US keyboard<&#47;a>, and retrieving it from the pen worked perfectly. The pen stored the entire thing, and returned it when I checked the name, although it did <em>not<&#47;em> display the entire string when I turned the device on, just the first part of it. The string of text I tested was "<em>~`!@#$%^&amp;*()-_+={}[]:;"'<>?&#47;,.\ Testing the maximum name length for a LiveScribe Smartpen... I wonder if I could fit a paragraph in here...? You have got to be kidding me... I typed this much and it STILL works? That's incredible. There's virtually no limit to how long the smartpen's name is. I can't believe I can set and receive values this long! I'm speechless...<&#47;em>". Needless to say, you can store almost anything in the name of the Smartpen. I wonder how the LiveScribe desktop software would react if it tried to retrieve this string.<&#47;li>
<li>I added a dialog box to rename the device, as well as another dialog box to confirm the new name.<&#47;li>
<li>LiveScribe no longer crashes when removing or connecting a smartpen while the program is running.<&#47;li>
<li>I merged in the inline functions <a href="https:&#47;&#47;github.com&#47;luispedro&#47;LibreScribe&#47;commit&#47;a11739481261eb40bca07967ce5ad04ae5664e0c">written by Luis Pedro Coelho on his fork of LibreScribe<&#47;a>, which are a better implementation of device type checking than I had<&#47;li>
<li><em>Tons<&#47;em> of new debugging output was added. You can see this output on the console. This makes figuring out what went wrong in a crash <em>so<&#47;em> much easier.<&#47;li><br />
<&#47;ul><br />
Remember, LibreScribe is still alpha quality and should not be used in a production environment. If you have any issues or suggestions, feel free to file a <a href="https:&#47;&#47;github.com&#47;aliendude5300&#47;LibreScribe&#47;issues&#47;new">bug report<&#47;a>. Or, if you're skilled enough, I'd appreciate it if you fixed the bug yourself, and submitted a patch. Ah, the benefits of open source coding! This is only just the beginning. Expect <em>tons<&#47;em> of new enhancements and bug fixes over the next several months.</p>
<div class="zemanta-pixie" style="margin-top: 10px; height: 15px;"><img class="zemanta-pixie-img" style="float: right;" src="http:&#47;&#47;img.zemanta.com&#47;pixy.gif?x-id=5073270c-b014-4354-9d04-19e8a53ec461" alt="" &#47;><&#47;div></p>
